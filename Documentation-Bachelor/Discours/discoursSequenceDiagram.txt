â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
                    PITCH PRÃ‰SENTATION - DIAGRAMME DE SÃ‰QUENCE
                         CloudDiagnoze - Flux d'un scan EC2
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ“Œ CONTEXTE (10 secondes)
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

"Les diagrammes prÃ©cÃ©dents montraient l'architecture STATIQUE du systÃ¨me :
comment le code est organisÃ©, comment les donnÃ©es sont stockÃ©es.

Maintenant, voyons l'architecture DYNAMIQUE : que se passe-t-il concrÃ¨tement
quand un utilisateur lance un scan EC2 ?

C'est ce que montre ce diagramme de sÃ©quence."


ğŸ¯ VUE D'ENSEMBLE (20 secondes)
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

[Montrer le diagramme complet]

"Un diagramme de sÃ©quence montre les INTERACTIONS entre les composants dans le TEMPS.

Le temps descend verticalement : on lit de haut en bas.

En haut, vous voyez les 8 acteurs de ce scÃ©nario :
   ğŸ‘¤ Utilisateur â†’ Frontend â†’ API â†’ ScanEngine â†’ Factory â†’ Scanner â†’ AWS â†’ Database

Les flÃ¨ches reprÃ©sentent les messages Ã©changÃ©s.

Ce diagramme raconte une histoire : 'L'utilisateur lance un scan, et voilÃ  tout
ce qui se passe en coulisses'."


ğŸ“– LE FLUX EN 3 PHASES (2 minutes)
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

[Pointer les parties du diagramme au fur et Ã  mesure]

ğŸ”¹ PHASE 1 : RÃ©ception de la demande (Ã©tapes 1-3)
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

"L'utilisateur clique sur 'Lancer un scan EC2' dans l'interface.

Le Frontend envoie une requÃªte HTTP Ã  l'API :
   POST /api/v1/scans
   Avec les donnÃ©es : provider = AWS, services = EC2

L'API reÃ§oit la requÃªte et fait 2 choses :
   âœ“ VÃ©rifier le token JWT (est-ce que l'utilisateur est authentifiÃ© ?)
   âœ“ Valider le payload (est-ce que les donnÃ©es sont correctes ?)

ğŸ‘‰ Regardez ce rectangle jaune : c'est la validation. Ã‡a prend ~50 millisecondes.

Si tout est bon, on passe Ã  la phase 2."


ğŸ”¹ PHASE 2 : Orchestration du scan (Ã©tapes 4-7)
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

"L'API appelle le ScanEngine, qui est le chef d'orchestre.

Le ScanEngine fait 3 actions :

1ï¸âƒ£  Il crÃ©e un 'ticket de scan' dans la base de donnÃ©es (ScanRun).
    â†’ INSERT INTO scan_runs
    â†’ Status = 'queued', service = 'ec2'
    â†’ La base retourne un ID : scan_run_id = 42

2ï¸âƒ£  Il demande Ã  la ScannerFactory de crÃ©er le bon scanner.
    â†’ 'Je veux un scanner AWS pour EC2'
    â†’ La Factory crÃ©e un EC2Scanner et le retourne

3ï¸âƒ£  Il lance le scan en appelant scanner.scan()

ğŸ‘‰ C'est ici qu'on voit le Factory Pattern en action : le ScanEngine ne crÃ©e
    pas lui-mÃªme le scanner, il le demande Ã  la Factory."


ğŸ”¹ PHASE 3 : ExÃ©cution et sauvegarde (Ã©tapes 8-10)
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

"Maintenant, le EC2Scanner fait le vrai travail :

1ï¸âƒ£  Il appelle AWS via boto3 :
    â†’ describe_instances() pour la rÃ©gion eu-west-1
    â†’ AWS retourne la liste des instances (disons 12 instances)
    â†’ Ã‡a prend ~800 millisecondes (c'est le plus long)

2ï¸âƒ£  Il sauvegarde les 12 instances dans la base de donnÃ©es :
    â†’ INSERT INTO ec2_instances (scan_run_id=42, instance_id, instance_type, ...)
    â†’ 12 lignes insÃ©rÃ©es
    â†’ Ã‡a prend ~200 millisecondes

3ï¸âƒ£  Il met Ã  jour le ticket de scan :
    â†’ UPDATE scan_runs SET status='success', total_resources=12
    â†’ Le scan est terminÃ© !

Ensuite, la rÃ©ponse remonte en sens inverse :
   Scanner â†’ ScanEngine â†’ API â†’ Frontend â†’ Utilisateur

L'utilisateur voit s'afficher : 'Scan terminÃ© : 12 instances trouvÃ©es'

ğŸ‘‰ Regardez les flÃ¨ches en pointillÃ©s : ce sont les retours de valeur.
    Elles remontent vers le composant qui a fait l'appel."


â±ï¸ PERFORMANCE ET TIMING (30 secondes)
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

[Pointer la zone de notes en bas]

"Regardez en bas : j'ai indiquÃ© les durÃ©es rÃ©elles.

Total du flux : environ 1 seconde

   â€¢ Validation + Auth : 50ms (rapide)
   â€¢ Appel AWS : 800ms (le plus lent, dÃ©pend du rÃ©seau)
   â€¢ Sauvegarde DB : 200ms (raisonnable)

ğŸ‘‰ Si on voulait optimiser, on pourrait :
   - Mettre en cache les donnÃ©es AWS (reduce API calls)
   - ParallÃ©liser les scans sur plusieurs rÃ©gions
   - Utiliser des tÃ¢ches asynchrones (Celery) pour les gros scans

Mais pour 12 instances, 1 seconde c'est tout Ã  fait acceptable."


ğŸ” SÃ‰CURITÃ‰ DANS LE FLUX (30 secondes)
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

"Trois points de sÃ©curitÃ© critiques dans ce flux :

1ï¸âƒ£  JWT vÃ©rifiÃ© Ã  l'entrÃ©e (Ã©tape 3)
    â†’ Si le token est invalide ou expirÃ©, le flux s'arrÃªte lÃ 
    â†’ HTTP 401 Unauthorized

2ï¸âƒ£  Isolation multi-tenant
    â†’ Quand on crÃ©e le ScanRun, on attache user_id
    â†’ Quand on sauvegarde les instances, elles sont liÃ©es au scan
    â†’ RÃ©sultat : impossible de voir les ressources d'un autre utilisateur

3ï¸âƒ£  Credentials AWS sÃ©curisÃ©s
    â†’ Pas de clÃ©s AWS en dur dans le code
    â†’ Utilisation de AssumeRole (STS)
    â†’ Le rÃ´le AWS est stockÃ© dans users.role_arn

ğŸ‘‰ Ã€ chaque Ã©tape, on vÃ©rifie les permissions et on filtre par user_id."


ğŸ“Š TYPES DE FLÃˆCHES (15 secondes)
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

[Pointer la lÃ©gende]

"Regardez la lÃ©gende en bas Ã  gauche.

Trois types de flÃ¨ches :

   â†’ FlÃ¨che noire pleine : Appel synchrone
     (j'envoie un message et j'attends la rÃ©ponse)

   â†’ FlÃ¨che grise pointillÃ©e : Retour de valeur
     (je renvoie le rÃ©sultat Ã  celui qui a appelÃ©)

   â†’ FlÃ¨che rouge pleine : OpÃ©ration SQL
     (j'Ã©cris ou je lis dans la base de donnÃ©es)

C'est une convention UML standard."


ğŸ¬ CONCLUSION (20 secondes)
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

"En rÃ©sumÃ©, ce diagramme montre :

âœ… Comment les 8 composants collaborent dans le temps
âœ… Le rÃ´le du Factory Pattern pour crÃ©er les scanners
âœ… Les 3 interactions avec la base de donnÃ©es (create, insert, update)
âœ… L'appel externe Ã  AWS qui prend le plus de temps
âœ… Les points de validation et sÃ©curitÃ©

Ce flux reprÃ©sente le cÅ“ur de CloudDiagnoze : scanner des ressources AWS
et les persister dans notre base.

MÃªme logique pour S3, VPC et RDS, seul le scanner change."


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
                                CONSEILS PRÃ‰SENTATION
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ’¬ LANGAGE CORPOREL
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

â†’ DESCENDRE avec ton doigt le long du diagramme pour montrer le temps qui passe
â†’ POINTER chaque acteur quand tu le mentionnes
â†’ TRACER les flÃ¨ches importantes avec ton doigt
â†’ Utiliser ta MAIN pour sÃ©parer les 3 phases (rÃ©ception / orchestration / exÃ©cution)


ğŸ“Š SLIDES / SUPPORT VISUEL
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

â†’ Slide 1 : Diagramme complet
â†’ Slide 2 : Zoom sur Phase 1 (validation)
â†’ Slide 3 : Zoom sur Phase 2 (orchestration + Factory)
â†’ Slide 4 : Zoom sur Phase 3 (AWS + DB)
â†’ Slide 5 : Tableau rÃ©capitulatif des timings (optionnel)


ğŸ¤ TRANSITIONS FLUIDES
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

"Une fois la requÃªte validÃ©e, le ScanEngine prend le relais..."
"Maintenant que le scanner est crÃ©Ã©, il va faire le vrai travail..."
"Les donnÃ©es arrivent d'AWS, il faut les sauvegarder..."


â“ ANTICIPER LES QUESTIONS DU JURY
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

Q: "Que se passe-t-il si AWS ne rÃ©pond pas ?"
R: "Timeout aprÃ¨s 30 secondes. Le ScanEngine met Ã  jour le ScanRun avec
    status='error' et enregistre l'erreur. L'utilisateur voit 'Scan Ã©chouÃ©'."

Q: "Est-ce que c'est bloquant pour l'utilisateur ?"
R: "Non, c'est asynchrone. L'API retourne immÃ©diatement 'HTTP 202 Accepted'
    avec le scan_id. L'utilisateur peut consulter le statut via GET /scans/{id}."

Q: "Pourquoi passer par une Factory au lieu de crÃ©er directement le scanner ?"
R: "Pour respecter le principe Ouvert/FermÃ©. Si demain j'ajoute Azure, je
    modifie juste la Factory, pas le ScanEngine. SÃ©paration des responsabilitÃ©s."

Q: "Comment vous testez ce flux ?"
R: "Avec des tests d'intÃ©gration qui mockent boto3 (via moto). Je simule AWS
    sans vraiment l'appeler. Ã‡a me permet de tester tout le flux en local."


â±ï¸ TIMING (AJUSTE SELON TON TEMPS TOTAL)
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

Version courte (2 min) : Vue d'ensemble + Les 3 phases (rapide) + Conclusion
Version moyenne (3-4 min) : Tout sauf "Performance" et "Types de flÃ¨ches"
Version longue (5 min) : Tout + Questions/RÃ©ponses


ğŸ”¥ PHRASES CLÃ‰S Ã€ RETENIR
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

"Ce diagramme raconte une histoire : de l'utilisateur jusqu'Ã  AWS et retour"
"Le temps descend : on lit de haut en bas"
"Le Factory Pattern en action : dÃ©lÃ©gation de la crÃ©ation"
"3 interactions DB : create ticket, insert resources, update status"
"1 seconde pour scanner 12 instances, c'est acceptable"


ğŸ’¡ ASTUCE PRO
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

Si le jury est technique :
   â†’ Insiste sur les patterns (Factory, Repository)
   â†’ Mentionne la gestion des erreurs et timeouts
   â†’ Parle d'optimisations possibles (async, cache)

Si le jury est moins technique :
   â†’ Focus sur le parcours utilisateur
   â†’ Utilise l'analogie du "ticket de caisse" pour ScanRun
   â†’ Simplifie : "On demande Ã  AWS, il rÃ©pond, on sauvegarde"


ğŸ”— LIEN AVEC LES AUTRES DIAGRAMMES
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

"Ce diagramme de sÃ©quence utilise les composants qu'on a vus dans :

â¡ï¸  Le diagramme de classes : ScannerFactory, EC2Scanner
â¡ï¸  Le diagramme BDD : tables scan_runs, ec2_instances
â¡ï¸  Le diagramme d'architecture : les 5 couches traversÃ©es

Tout est cohÃ©rent. Les diagrammes se complÃ¨tent."


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
                                    BON COURAGE ! ğŸš€
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
