<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CloudDiagnoze - Paramètres</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;500;600;700;800;900&family=Rajdhani:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />

    <!-- Scripts JavaScript -->
    <script src="js/config.js"></script>
    <script src="js/api.js"></script>
    <script src="js/auth.js"></script>
    <script src="js/user-menu.js"></script>
    <script src="js/settings.js"></script>
    
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#137FEC',
                        secondary: '#8B5CF6',
                        accent: '#06B6D4',
                        success: '#10B981',
                        warning: '#F59E0B',
                        danger: '#EF4444',
                    },
                    fontFamily: {
                        sans: ['Rajdhani', 'sans-serif'],
                        display: ['Orbitron', 'sans-serif'],
                        mono: ['JetBrains Mono', 'monospace'],
                    },
                }
            }
        }
    </script>

    <!-- CSS Dashboard Modern -->
    <link rel="stylesheet" href="css/dashboard-modern.css">
</head>

<body class="bg-background-dark font-sans text-white overflow-hidden">
    <!-- Background Effects -->
    <div class="fixed inset-0 pointer-events-none z-0">
        <!-- Diagnostic Grid -->
        <div class="diagnostic-grid"></div>
        
        <!-- Floating Keywords -->
        <div class="floating-keywords">
            <span class="keyword keyword-1">Optimization</span>
            <span class="keyword keyword-2">Cloud</span>
            <span class="keyword keyword-3">Monitoring</span>
            <span class="keyword keyword-4">Security</span>
            <span class="keyword keyword-5">Performance</span>
            <span class="keyword keyword-6">Analytics</span>
            <span class="keyword keyword-7">Infrastructure</span>
        </div>

        <!-- Data Particles -->
        <div class="data-particles">
            <div class="particle"></div>
            <div class="particle"></div>
            <div class="particle"></div>
            <div class="particle"></div>
            <div class="particle"></div>
            <div class="particle"></div>
            <div class="particle"></div>
            <div class="particle"></div>
            <div class="particle"></div>
            <div class="particle"></div>
        </div>
    </div>

    <div class="flex h-screen w-full relative z-10">
        <!-- Sidebar -->
        <aside class="sidebar">
            <div class="flex flex-col h-full">
                <!-- Logo -->
                <div class="p-6 border-b border-slate-800/50">
                    <div class="flex items-center gap-3">
                        <div class="w-10 h-10 bg-primary/20 rounded-lg flex items-center justify-center">
                            <span class="material-symbols-outlined text-primary text-2xl">analytics</span>
                        </div>
                        <div>
                            <h1 class="logo-text text-xl">CloudDiagnoze</h1>
                            <p class="text-xs text-slate-400 font-mono">v2.0</p>
                        </div>
                    </div>
                </div>

                <!-- Navigation -->
                <nav class="flex-1 p-4 space-y-2">
                    <a class="nav-link" href="dashbord.html">
                        <span class="material-symbols-outlined text-2xl">dashboard</span>
                        <p class="text-sm font-medium leading-normal">Dashboard Global</p>
                    </a>
                    <a class="nav-link" href="dashboard-ec2.html">
                        <span class="material-symbols-outlined text-2xl">dns</span>
                        <p class="text-sm font-medium leading-normal">EC2 Instances</p>
                    </a>
                    <a class="nav-link" href="dashboard-s3.html">
                        <span class="material-symbols-outlined text-2xl">folder</span>
                        <p class="text-sm font-medium leading-normal">S3 Buckets</p>
                    </a>
                    <a class="nav-link" href="dashboard-vpc.html">
                        <span class="material-symbols-outlined text-2xl">cloud</span>
                        <p class="text-sm font-medium leading-normal">VPC Networks</p>
                    </a>
                    <a class="nav-link" href="config-scan-new.html">
                        <span class="material-symbols-outlined text-2xl">settings</span>
                        <p class="text-sm font-medium leading-normal">New Scan</p>
                    </a>
                    <a class="nav-link active" href="settings.html">
                        <span class="material-symbols-outlined text-2xl">tune</span>
                        <p class="text-sm font-medium leading-normal">Paramètres</p>
                    </a>
                </nav>

                <!-- Logout -->
                <div class="p-4 border-t border-slate-800/50">
                    <button onclick="authManager.logout()" class="nav-link w-full text-red-400 hover:bg-red-500/10">
                        <span class="material-symbols-outlined text-2xl">logout</span>
                        <p class="text-sm font-medium leading-normal">Déconnexion</p>
                    </button>
                </div>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="flex-1 flex flex-col overflow-y-auto main-content">
            <!-- Header -->
            <header class="header flex items-center justify-between px-10 py-3">
                <div class="flex items-center gap-4">
                    <span class="material-symbols-outlined text-primary text-xl">tune</span>
                    <h2 class="header-title">Paramètres du compte</h2>
                </div>
                <div class="flex items-center gap-4">
                    <!-- Search -->
                    <div class="flex items-center gap-2 bg-slate-800/50 rounded-lg px-4 py-2 border border-slate-700/50">
                        <span class="material-symbols-outlined text-slate-400">search</span>
                        <input
                            type="text"
                            placeholder="Search resources..."
                            class="bg-transparent border-none outline-none text-white placeholder-slate-400 w-64"
                        />
                    </div>

                    <!-- Notifications -->
                    <button class="relative flex items-center justify-center h-10 w-10 bg-slate-800/50 rounded-lg text-slate-300 hover:bg-primary/20 hover:text-primary border border-slate-700/50">
                        <span class="material-symbols-outlined">notifications</span>
                        <div class="absolute top-1.5 right-1.5 h-2.5 w-2.5 rounded-full border-2 border-background-dark bg-red-500"></div>
                    </button>

                    <!-- User Info -->
                    <div id="user-info-header" class="flex items-center gap-3 px-3 py-2 rounded-lg bg-slate-800/50 border border-slate-700/50 cursor-pointer hover:bg-slate-800">
                        <span class="material-symbols-outlined text-primary text-3xl">account_circle</span>
                        <div class="flex flex-col">
                            <p id="user-name-header" class="text-white text-sm font-medium">Chargement...</p>
                            <p id="user-email-header" class="text-slate-400 text-xs">...</p>
                        </div>
                    </div>
                </div>
            </header>

            <!-- Dashboard Content -->
            <div class="flex-1 px-10 py-6 overflow-y-auto">
                <!-- Page Description -->
                <div class="mb-6">
                    <p class="text-slate-400 text-lg">Gérez vos informations personnelles et vos préférences</p>
                </div>

                <!-- Informations Personnelles -->
                <div class="glass-card p-6 mb-6">
                    <h3 class="text-xl font-bold text-white mb-6 flex items-center gap-2">
                        <span class="material-symbols-outlined text-primary">person</span>
                        Informations Personnelles
                    </h3>
                    
                    <form id="personal-info-form" class="space-y-4">
                        <!-- Nom complet -->
                        <div>
                            <label for="full-name" class="block text-sm font-medium text-slate-300 mb-2">
                                Nom complet
                            </label>
                            <input 
                                type="text" 
                                id="full-name" 
                                name="full_name"
                                class="w-full px-4 py-3 rounded-lg bg-slate-800/50 border border-slate-700 text-white placeholder-slate-400 focus:outline-none focus:border-primary transition-colors"
                                placeholder="John Doe"
                                required
                            />
                        </div>

                        <!-- Email (lecture seule) -->
                        <div>
                            <label for="email" class="block text-sm font-medium text-slate-300 mb-2">
                                Email
                            </label>
                            <input 
                                type="email" 
                                id="email" 
                                name="email"
                                class="w-full px-4 py-3 rounded-lg bg-slate-800/30 border border-slate-700 text-slate-400 cursor-not-allowed"
                                readonly
                            />
                            <p class="text-xs text-slate-400 mt-1">L'email ne peut pas être modifié</p>
                        </div>

                        <!-- Entreprise -->
                        <div>
                            <label for="company-name" class="block text-sm font-medium text-slate-300 mb-2">
                                Entreprise
                            </label>
                            <input 
                                type="text" 
                                id="company-name" 
                                name="company_name"
                                class="w-full px-4 py-3 rounded-lg bg-slate-800/50 border border-slate-700 text-white placeholder-slate-400 focus:outline-none focus:border-primary transition-colors"
                                placeholder="Acme Corp"
                            />
                        </div>

                        <!-- Role ARN AWS -->
                        <div>
                            <label for="role-arn" class="block text-sm font-medium text-slate-300 mb-2 flex items-center gap-2">
                                <span class="material-symbols-outlined text-warning text-lg">key</span>
                                AWS Role ARN
                            </label>
                            <input 
                                type="text" 
                                id="role-arn" 
                                name="role_arn"
                                class="w-full px-4 py-3 rounded-lg bg-slate-800/50 border border-slate-700 text-white placeholder-slate-400 focus:outline-none focus:border-primary transition-colors font-mono text-sm"
                                placeholder="arn:aws:iam::123456789012:role/YourRole"
                            />
                            <p class="text-xs text-slate-400 mt-1">
                                ⚠️ ARN du rôle IAM utilisé pour les scans AWS. <strong>Requis pour lancer des scans.</strong>
                            </p>
                        </div>

                        <!-- Bouton Sauvegarder -->
                        <div class="flex justify-end pt-4">
                            <button 
                                type="submit"
                                class="px-6 py-3 bg-primary hover:bg-blue-600 text-white font-bold rounded-lg transition-all shadow-lg hover:shadow-primary/50 flex items-center gap-2"
                            >
                                <span class="material-symbols-outlined">save</span>
                                Sauvegarder les modifications
                            </button>
                        </div>
                    </form>
                </div>

                <!-- Changement de mot de passe -->
                <div class="glass-card p-6 mb-6">
                    <h3 class="text-xl font-bold text-white mb-6 flex items-center gap-2">
                        <span class="material-symbols-outlined text-primary">lock</span>
                        Changer le mot de passe
                    </h3>

                    <form id="password-form" class="space-y-4">
                        <!-- Mot de passe actuel -->
                        <div>
                            <label for="current-password" class="block text-sm font-medium text-slate-300 mb-2">
                                Mot de passe actuel
                            </label>
                            <input
                                type="password"
                                id="current-password"
                                name="current_password"
                                class="w-full px-4 py-3 rounded-lg bg-slate-800/50 border border-slate-700 text-white placeholder-slate-400 focus:outline-none focus:border-primary transition-colors"
                                placeholder="••••••••"
                                required
                            />
                        </div>

                        <!-- Nouveau mot de passe -->
                        <div>
                            <label for="new-password" class="block text-sm font-medium text-slate-300 mb-2">
                                Nouveau mot de passe
                            </label>
                            <input
                                type="password"
                                id="new-password"
                                name="new_password"
                                class="w-full px-4 py-3 rounded-lg bg-slate-800/50 border border-slate-700 text-white placeholder-slate-400 focus:outline-none focus:border-primary transition-colors"
                                placeholder="••••••••"
                                required
                            />
                        </div>

                        <!-- Confirmer le mot de passe -->
                        <div>
                            <label for="confirm-password" class="block text-sm font-medium text-slate-300 mb-2">
                                Confirmer le mot de passe
                            </label>
                            <input
                                type="password"
                                id="confirm-password"
                                name="confirm_password"
                                class="w-full px-4 py-3 rounded-lg bg-slate-800/50 border border-slate-700 text-white placeholder-slate-400 focus:outline-none focus:border-primary transition-colors"
                                placeholder="••••••••"
                                required
                            />
                        </div>

                        <!-- Bouton Changer -->
                        <div class="flex justify-end pt-4">
                            <button
                                type="submit"
                                class="px-6 py-3 bg-warning hover:bg-yellow-600 text-white font-bold rounded-lg transition-all shadow-lg hover:shadow-warning/50 flex items-center gap-2"
                            >
                                <span class="material-symbols-outlined">lock_reset</span>
                                Changer le mot de passe
                            </button>
                        </div>
                    </form>
                </div>

                <!-- Informations du compte -->
                <div class="glass-card p-6 mb-6">
                    <h3 class="text-xl font-bold text-white mb-6 flex items-center gap-2">
                        <span class="material-symbols-outlined text-primary">info</span>
                        Informations du compte
                    </h3>

                    <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                        <!-- Date de création -->
                        <div class="bg-slate-800/30 rounded-lg p-4 border border-slate-700/50">
                            <p class="text-slate-400 text-sm mb-1">Compte créé le</p>
                            <p id="account-created" class="text-white font-bold text-lg">-</p>
                        </div>

                        <!-- Dernière connexion -->
                        <div class="bg-slate-800/30 rounded-lg p-4 border border-slate-700/50">
                            <p class="text-slate-400 text-sm mb-1">Dernière connexion</p>
                            <p id="last-login" class="text-white font-bold text-lg">-</p>
                        </div>

                        <!-- Statut du compte -->
                        <div class="bg-slate-800/30 rounded-lg p-4 border border-slate-700/50">
                            <p class="text-slate-400 text-sm mb-1">Statut</p>
                            <p id="account-status" class="text-success font-bold text-lg">Actif</p>
                        </div>
                    </div>
                </div>

                <!-- Zone de danger (Testing) -->
                <div class="glass-card p-6 border-2 border-red-500/30">
                    <h3 class="text-xl font-bold text-red-400 mb-4 flex items-center gap-2">
                        <span class="material-symbols-outlined">warning</span>
                        Zone de danger (Testing)
                    </h3>

                    <div class="bg-red-500/10 border border-red-500/30 rounded-lg p-4 mb-4">
                        <p class="text-slate-300 text-sm mb-2">
                            <strong class="text-red-400">⚠️ Attention :</strong> Cette action supprimera <strong>toutes vos données de scan</strong> (instances EC2, buckets S3, métriques, historique).
                        </p>
                        <p class="text-slate-400 text-xs">
                            Votre compte utilisateur sera conservé, mais tous les dashboards seront vides. Utile pour les tests.
                        </p>
                    </div>

                    <button
                        id="btn-clear-user-data"
                        class="px-6 py-3 bg-red-500 hover:bg-red-600 text-white font-bold rounded-lg transition-all shadow-lg hover:shadow-red-500/50 flex items-center gap-2"
                    >
                        <span class="material-symbols-outlined">delete_forever</span>
                        Supprimer toutes mes données de scan
                    </button>
                </div>
            </div>
        </main>
    </div>
</body>
</html>

